# OSI 7계층

> 네트워크 통신을 구성하는 요소를 7개의 계층으로 표준화 한 것

## OSI 7계층으로 나눈 이유

네트워크의 통신의 단계를 나누어 구분하면 문제가 발생했을때 어떤 계층에서 이상이 생겼는지를 빠르게 파악할 수 있다.  
예를 들어 네트워크에 연결되지 않았을때 ping을 보낸 뒤 응답이 일어나지 않는다면 Network Layer에서 문제가 일어난 것이기 때문에 이 부분을 우선적으로 조사해 문제를 해결할 수 있다.

## OSI 7계층의 도식

OSI 7계층을 다음과 같이 구성되어 있다.

![OSI7](https://github.com/ChangSuLee00/CS-study/blob/main/pictures/OSI_7layer.png?raw=true)

OSI 7계층은 다시 두 가지 계층으로 나눌 수 있다.  
1-4계층: 데이터 플로 계층(Data Flow Layer) / 하위 계층(Lower Layer)  
5-7계층: 애플리케이션 계층(Application Layer) / 상위 계층(Upper Layer)  
이러한 계층은 각각의 역할과 목표에 따라 구분된다.

### 1계층: 피지컬 계층(Physical Layer)

> 물리적 연결과 관련된 정보를 정의한다

피지컬 계층은 0과 1의 비트를 통해 전기 신호를 전달하는 역할을 한다.  
피지컬 계층은 1계층으로 흘러들어온 전기 신호를 그대로 전달하는 것을 목적으로 하기 때문에 주소(목적지)와 에러를 고려하지 않는다.

#### 피지컬 계층의 장비

1계층의 주요 장비는 허브(Hub), 리피터(Repeater), 케이블(Cable), 커넥터(Connector), 트랜시버(Tranceiver), 탭(TAP)이 있다. 1계층의 장비는 주소의 개념이 없어 전기 신호가 들어온 포트를 제외하고 모든 포트에 같은 전기 신호를 전송한다.

### 2계층: 데이터 링크 계층(DataLink Layer)

> 전기 신호를 모아 데이터의 형태로 처리하고, 정보의 오류와 흐름을 관리한다

2계층은 주소 정보를 정의하고 정확한 주소로 통신하는 것에 초점을 맞추고 있다.  
2계층의 가장 중요한 특징은 MAC주소라고 하는 주소 체계가 있어 출발지와 목적지를 구별할 수 있다는 점이다. 따라서 2계층은 MAC주소를 통해 통신의 당사자가 맞는지 검사한 뒤 데이터 처리를 수행하고(Flow Control). 데이터에 대한 에러를 탐지하고 수정하는 역할을 할 수 있다.

#### 데이터 링크 계층의 장비

2계층의 주요 장비로는 스위치(Switch), 네트워크 인터페이스카드(NIC, 랜 카드, 이더넷 카드, 네트워크 어댑터)가 있다. 네트워크 인터페이스 카드에는 각기 MAC주소가 있어 자신에게 오는 전기신호가 맞으면 상위 계층으로 올려보내고 아니라면 버린다.

### 3계층: 네트워크 계층(Network Layer)

> IP주소를 이용해 데이터를 목적지까지 정확하게 전달하는 역할을 한다.

네트워크 계층의 장비는 IP주소를 이해할 수 있기 때문에 IP주소를 사용해서 최적의 경로를 찾고 그 경로로 패킷을 전송하는 역할(라우팅)을 한다. 또한 3계층은 흐름 제어, 오류제어 등의 역할도 한다.

#### 네트워크 계층의 장비

네트워크 계층의 대표적 장비는 라우터이다. 라우팅 기능을 포함한 L3 스위치도 네트워크 계층의 장비로 분류한다.

### 4계층: 트랜스포트 계층(Transport Layer)

> 전송한 데이터들이 정상적으로 보내지도록 하는 역할을 한다.

데이터는 보통 분할되어 패킷에 실려 보내지기 때문에 패킷이 유실되거나 순서가 바뀌는 경우가 생길 수 있다.  
해당 오류를 바로잡아주는 역할을 4계층에서 담당한다.  
패킷을 보내는 순서를 나타낸 것이 시퀸스번호이며 받는 순서를 나타낸 것이 ACK번호이다.  
이러한 번호를 통해 패킷이 잘못된 순서로 들어오더라도 바로잡을 수 있고, 중간에 유실된다면 재전송을 요청할 수 있다.

#### 트랜스포트 계층의 장비

트랜스포트 계층의 장비로는 로드 벨런서와 방화벽이 있다.

### 5계층: 세션 계층(Session Layer)

> 세션을 관리하는 역할을 한다

세션 계층은 양 끝단의 응용 프로세스가 연결을 성립하도록 도와주고 연결이 안정적으로 유지죄도록 관리하며,  
작업 완료 후에는 이 연결을 끊는 역할을 한다.  
세션을 관리하는 5계층은 TCP/IP 세션을 만들고 없애는 책임을 진다.  
또한 에러로 중단된 통신에 대한 복구와 재전송 또한 수행한다.

### 6계층: 프레젠테이션 계층(Presentation Layer)

> 데이터 형식을 규정하고 코드간 번역을 담당한다

프레젠테이션 계층은 표현 방식이 다른 어플리케이션이나 시스템간 통신을 도와 하나의 통일된 구문 형식으로 변환하는 기능을 한다.

### 7계층: 애플리케이션 계층(Application Layer)

> 애플리케이션의 프로세스를 정의하고 서비스를 수행한다

네트워크 소프트웨어의 UI나 사용자의 입출력 부분을 정의한다.

## OSI7계층과 TCP/IP

![OSI-TCP](https://github.com/ChangSuLee00/CS-study/blob/main/pictures/OSI_TCP.jpg?raw=true)

현대의 대부분의 네트워크는 TCP/IP로 구성되어 있다.

TCP/IP 계층 구분은 OSI 7계층을 기반으로 하여 다음과 같이 분류한다.  

7, 6, 5계층을 애플리케이션 계층으로,  
4계층을 트랜스포트 계층으로,  
3계층을 인터넷 계층으로,  
1, 2계층을 네트워크 엑세스 계층으로 묶어서 분류한다.


Reference: [Cloudflare OSI model](https://www.cloudflare.com/ko-kr/learning/ddos/glossary/open-systems-interconnection-model-osi/)